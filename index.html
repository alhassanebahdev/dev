<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíä Pharmacie d'ISSAGA BAH üíä</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background-image: url("backg-removebg-previ.png");
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
            font-family: Arial, sans-serif;
        }

        main {
            position: relative;
            padding: 20px;
        }

        .index1, .index {
            text-align: center;
            color: white;
            text-shadow: 1px 1px 3px #000;
            margin-bottom: 20px;
        }

        .index1 {
            font-size: 50px;
        }

        .index {
            font-size: 35px;
        }

        .index2 {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        input {
            margin: 10px;
            padding: 10px;
            font-size: 18px;
            border-radius: 8px;
            border: 1px solid #999;
            width: calc(50% - 30px);
        }

        input:focus {
            outline: none;
            border-color: green;
            box-shadow: 0 0 5px green;
        }

        .index3 {
            text-align: center;
            margin-bottom: 20px;
        }

        .but {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            color: white;
            transition: 0.3s;
        }

        #enregistrer { background-color: green; }
        #enregistrer:hover { background-color: darkgreen; }

        #afficher { background-color: #3498db; }
        #afficher:hover { background-color: #217dbb; }

        #effacer { background-color: red; }
        #effacer:hover { background-color: darkred; }

        table {
            width: 90%;
            margin: auto;
            border-collapse: collapse;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            overflow: hidden;
        }

        th, td {
            padding: 12px 15px;
            text-align: center;
        }

        th {
            background-color: #3498db;
            color: white;
            font-size: 18px;
        }

        td {
            font-size: 16px;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .foot1 {
            font-weight: bold;
        }
    </style>
</head>

<body>
    <main>
        <h1 class="index1">üíä Pharmacie d'ISSAGA BAH üíä</h1>
        <h2 class="index">üìä Gestion des Ventes üìä</h2>

        <div class="index2">
            <input type="text" id="produit" placeholder="Nom du Produit üìù">
            <input type="number" id="prix" placeholder="Prix du Produit üí∞">
        </div>

        <div class="index3">
            <button id="enregistrer" class="but">üíæ Enregistrer</button>
            <button id="afficher" class="but">üëÄ Afficher</button>
            <button id="effacer" class="but">üóëÔ∏è Effacer Tout</button>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Produit</th>
                    <th>Prix</th>
                    <th>Heure</th>
                    <th>Date</th>
                    <th>Supprimer</th>
                    <th>Modifier</th>
                </tr>
            </thead>
            <tbody id="body"></tbody>
            <tfoot>
                <tr>
                    <td class="foot1">Somme Totale üí∞ :</td>
                    <td id="foot2"></td>
                </tr>
            </tfoot>
        </table>
    </main>

    <script>
        $(document).ready(function () {
            let edit = null;

            function afficherTout() {
                let tout = JSON.parse(localStorage.getItem("touts")) || [];
                let td = "";
                let somme = 0;
                tout.forEach((a, index) => {
                    somme += Number(a.prix);
                    td += `<tr>
                        <td>${a.nom} üè∑Ô∏è</td>
                        <td>${a.prix} FCFA üíµ</td>
                        <td>${a.heure} ‚è∞</td>
                        <td>${a.date} üìÖ</td>
                        <td><button class="supprimer but" data-index="${index}">‚ùå</button></td>
                        <td><button class="modifier but" data-index="${index}">‚úèÔ∏è</button></td>
                    </tr>`;
                });
                $("#body").html(td);
                $("#foot2").text(somme + " FCFA üí∞");
            }

            $("#enregistrer").click(function () {
                let now = new Date();
                let date = now.toDateString();
                let heure = now.toLocaleTimeString();
                let nom = $("#produit").val();
                let prix = $("#prix").val();

                if (nom && prix) {
                    let tout = JSON.parse(localStorage.getItem("touts")) || [];
                    if (edit === null) {
                        tout.push({ nom: nom, prix: Number(prix), date: date, heure: heure });
                        alert("‚úÖ Produit ajout√© avec succ√®s !");
                    } else {
                        tout[edit] = { nom: nom, prix: Number(prix), date: date, heure: heure };
                        edit = null;
                        $("#enregistrer").text("üíæ Enregistrer");
                        alert("‚úèÔ∏è Produit mis √† jour !");
                    }
                    localStorage.setItem("touts", JSON.stringify(tout));
                    $("#produit,#prix").val("");
                    afficherTout();
                } else {
                    alert("‚ö†Ô∏è Veuillez remplir tous les champs !");
                }
            });

            $("#afficher").click(afficherTout);

            $("#body").on("click", ".supprimer", function () {
                if (confirm("‚ùå Voulez-vous vraiment supprimer ce produit ?")) {
                    let index = $(this).data("index");
                    let tout = JSON.parse(localStorage.getItem("touts")) || [];
                    tout.splice(index, 1);
                    localStorage.setItem("touts", JSON.stringify(tout));
                    afficherTout();
                }
            });

            $("#body").on("click", ".modifier", function () {
                edit = $(this).data("index");
                let tout = JSON.parse(localStorage.getItem("touts")) || [];
                let produit = tout[edit];
                $("#produit").val(produit.nom);
                $("#prix").val(produit.prix);
                $("#enregistrer").text("‚úèÔ∏è Mise √† jour");
            });

            $("#effacer").click(function () {
                if (confirm("üóëÔ∏è Voulez-vous vraiment tout effacer ?")) {
                    localStorage.removeItem("touts");
                    $("#body").html("");
                    $("#foot2").text("");
                }
            });
        });
    </script>
</body>
</html>
